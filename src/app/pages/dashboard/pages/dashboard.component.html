<app-layout
  title="ðŸŽ® PlayStation Lounge"
  [showLogout]="true"
  [isPinEnabled]="isPinEnabled()"
  (logout)="handleLogout()"
  [showDarkModeToggle]="true"
>
  <!-- KPI Cards Grid -->
  <ion-grid class="kpi-grid">
    <ion-row>
      <ion-col size="6" size-md="3">
        <app-kpi-card
          title="Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…"
          [value]="todayRevenue()"
          subtitle="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙŠÙˆÙ…"
          icon="cash"
          color="success"
        ></app-kpi-card>
      </ion-col>

      <ion-col size="6" size-md="3">
        <app-kpi-card
          title="Ø¬Ù„Ø³Ø§Øª Ù†Ø´Ø·Ø©"
          [value]="activeSessions().length"
          subtitle="Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ´ØºÙŠÙ„"
          icon="game-controller"
          color="primary"
        ></app-kpi-card>
      </ion-col>

      <ion-col size="6" size-md="3">
        <app-kpi-card
          title="Ø¬Ù„Ø³Ø§Øª Ø§Ù„ÙŠÙˆÙ…"
          [value]="todaySessions().length"
          subtitle="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙŠÙˆÙ…"
          icon="people"
          color="info"
        ></app-kpi-card>
      </ion-col>

      <ion-col size="6" size-md="3">
        <app-kpi-card
          title="Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù„Ø¹Ø¨"
          [value]="totalHoursPlayed()"
          subtitle="Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆÙ‚Øª"
          icon="time"
          color="warning"
        ></app-kpi-card>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- Active Sessions Section -->
  @if (activeSessions().length > 0) {
    <ion-card class="sessions-card">
      <ion-card-header>
        <ion-card-title>Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© ({{ activeSessions().length }})</ion-card-title>
      </ion-card-header>

      <ion-card-content>
        @for (session of activeSessions(); track session.id) {
          <app-active-session
            [session]="session"
            [duration]="getSessionDuration(session)"
            [cost]="getSessionCost(session)"
            [formatTime]="formatTime.bind(this)"
            [formatCurrency]="formatCurrency.bind(this)"
            (togglePause)="handleTogglePause($event)"
            (endSession)="handleEndSession($event)"
          ></app-active-session>
        }
      </ion-card-content>
    </ion-card>
  }

  <!-- Quick Actions -->
  <app-quick-actions [actions]="quickActions"></app-quick-actions>

  <div class="bottom-spacer"></div>
</app-layout>
